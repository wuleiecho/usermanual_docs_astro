---
title: 图像分类使用说明
description: Docs intro
layout: ../../layouts/MainLayout.astro
---

---

## 功能介绍

### **简介**

ImageX训练平台支持支持图像分类、目标检测、语义分割三类模型的训练及效果评估，三类模型的功能区别如下：

- 图像分类：按照代表图像整体内容的标签对图像进行分类。适用于图片内容单一、需要给整张图片进行分类的场景
- 目标检测：通常使用矩形框来描述目标位置，任务是找出图像中所有需要检测的目标，确定它们的位置、类别。适合图中有多个主体需要识别、或要识别主体位置及数量的场景。
- 语义分割：是指将图像中的每个像素链接到类标签的过程。适合图中有多个主体、需识别其位置或轮廓的场景

以下是关于图像分类模型的技术文档。

### **应用场景**

- 质量检测：识别生产线中的不合格品。
- 产品分类：将产品分类到不同类别中
- 缺陷检测：通过对产品图像分类，检测产品中的缺陷
- 图像过滤：根据内容过滤或验证用户提交的图像。

### **使用流程**

训练模型的基本流程如下图所示，下面将详细介绍每一步的操作方式和注意事项

![使用流程](/images/图像分类使用说明/使用流程.jpeg)





## 数据准备

### **分类数据标注**

---

标注的方式非常简单，只需在文件夹中根据图片类型，定义多个文件标签（如下图ng/ok），将同一类的图片，存放在对应标签的文件夹中即完成标注。

![分类数据标注](/images/图像分类使用说明/分类数据标注.png)





### 数据格式转换

---

标注完成后需将数据格式转换方可上传训练平台开始训练。

**Step 1** 安装anaconda，链接：[https://www.anaconda.com/](https://www.anaconda.com/)

**Step 2** 安装拆分数据集脚本：[https://share.weiyun.com/dvCJKFve](https://share.weiyun.com/dvCJKFve) 下载解压后保存

**Step 3** 打开该文件夹：

![打开文件夹](/images/图像分类使用说明/打开文件夹.png)

**Step 4** 在文件夹顶部地址栏输入cmd回车：

![cmd回车](/images/图像分类使用说明/cmd回车.png)

**Step 5** 输入命令 conda activate base：

![active](/images/图像分类使用说明/active.png)

安装出错，可以网络搜索 windows配置anaconda环境变量

**Step 6** 安装依赖包 pip install pycocotools -i [https://pypi.tuna](https://pypi.tuna/) .tsinghua.edu.cn/simple（已安装可跳过此步骤）：

![跳过](/images/图像分类使用说明/跳过.png)

**Step 7** 根据数据集类型使用命令进行切分：

分类：python dataset_split_code.py --dataset_dir D:/OneDrive/work/Dataset/det_test --task clas --val_value 0.2 --test_value 0.0

说明：

（1）切分数据前，检查图像名称务必不要出现空格、中文名、括号、点号等。（如下图）：

![1](/images/图像分类使用说明/1.png)

（2）命令中D:/OneDrive/work/Dataset/clas_test是存放标注结果的目录，需替换成实际存放标注结果的目录，如示例，我的目录为：F:/furu/shifanfenlei）

![2](/images/图像分类使用说明/2.png)

![3](/images/图像分类使用说明/3.png)

**Step 8** 数据集划分完成后，也可在目录中查看数据格式转换结果，将数据文件打包上传训练平台就可以训练了！

![文件打包](/images/图像分类使用说明/文件打包.png)



### 创建数据集

---

**Step 1** 登录训练平台后，点击侧边栏的【训练任务管理】

![c1](/images/图像分类使用说明/c1.png)

**Step 2** 点击训练节点下拉框选择相应的训练节点

![c2](/images/图像分类使用说明/c2.png)

**Step 3** 点击【获取训练节点数据】按钮，获取对应训练节点的数据集列表信息

![c3](/images/图像分类使用说明/c3.png)

**Step 4** 点击导航栏的【数据集】

![c4](/images/图像分类使用说明/c4.png)

**Step 5** 点击【新建数据集】按钮

![c5](/images/图像分类使用说明/c5.png)

**Step 6** 填写相应的数据集信息，并选择数据集类型为【图像分类】（*号为必填项）

![c6](/images/图像分类使用说明/c6.png)

**Step 7** 确认无误后点击【OK】，这时页面会显示新创建的数据集，且【数据集状态】是【空数据集】

![c7](/images/图像分类使用说明/c7.png)





### 导入数据集

---

**数据集要求：**

1、导入的训练图片格式仅支持bmp/jpg/png/jpeg，

2、导入的数据压缩包size的最大值为900M；

3、导入的数据压缩包命名仅支持英文、数字、下划线

4、导入的训练数据集内一定要包含labels.txt，train_list.txt和val_list.txt文件，且文件内容不能为空，test_list.txt文件不作要求；

5、导入的训练数据集内单标签分类的⽂件最大数量为5000，图像集合的最⼤数量为20000，分类/检测/分割标签的最大数分别为：1000，80，255；

6、导入数据的时间最多不能超过18分钟，否则数据会上传失败；

**导入数据集步骤：**

**Step 1** 点击【操作】栏下新建数据集一行的【导入】按钮

![d1](/images/图像分类使用说明/d1.png)

**Step 2** 点击【数据集上传】上传数据集划分后的数据压缩包

![d2](/images/图像分类使用说明/d2.png)

**Step 3** 等待数据上传结束（具体时间视网速、数据大小而定）

![d3](/images/图像分类使用说明/d3.png)

**Step 4** 点击【OK】按钮

![d4](/images/图像分类使用说明/d4.png)

**Step 5** 点击【刷新】按钮，【数据集状态】会由【空数据集】变为【数据集已经切分】

![d5](/images/图像分类使用说明/d5.png)

![d6](/images/图像分类使用说明/d6.png)



### 预览数据集

---

**Step 1** 点击【预览】按钮，可查看数据集相关信息（注：只有当【数据集状态】是【数据集已经切分】，才可以点击【预览】按钮，其他状态下【预览】按钮会呈现灰色，无法点击）

![y1](/images/图像分类使用说明/y1.png)

![y1-1](/images/图像分类使用说明/y1-1.png)

**Step 2**【预览】页面默认显示的是【全量数据集】，可通过下拉框来选择相应的图片

![y2](/images/图像分类使用说明/y2.png)

**Step 3** 点击【数据集预览】内的图片，每张图片可以放大，缩小，切换上（下）一张

![y3](/images/图像分类使用说明/y3.png)

**Step 4** 点击【OK】关闭【预览】页面（注：点击【Cancel】、右上角的【X】或页面任一位置都可以关闭【预览】页面）

![y4](/images/图像分类使用说明/y4.png)





## 模型训练

### 创建训练项目

---

**Step 1** 点击切换到【项目】页面

![xm1](/images/图像分类使用说明/xm1.png)

**Step 2** 点击【新建项目】按钮

![xm2](/images/图像分类使用说明/xm2.png)

**Step 3** 填写项目信息，项目类型选择【图像分类】，数据集选择已创建的分类数据集（*号为必填项）

![xm3](/images/图像分类使用说明/xm3.png)

**Step 4** 确认无误后点击【OK】

![xm4](/images/图像分类使用说明/xm4.png)



### 创建训练任务

---

**Step 1** 点击刚刚创建的项目对应的【新建任务】按钮

![rw1](/images/图像分类使用说明/rw1.png)

**Step 2** 在新建任务弹窗中，设置训练参数（可选择默认参数）

![rw2](/images/图像分类使用说明/rw2.png)

**Step 3** 设置完训练参数后，点击右下角【创建并启动训练】按钮

![rw3](/images/图像分类使用说明/rw3.png)



### 查看训练状态

---

**Step 1** 点击新建项目左侧的【+】按钮，可以看到任务的训练进度（注：若训练过程中需要暂停，可点击【中止训练】按钮，随后点击【继续训练】按钮可恢复训练）

![zt1](/images/图像分类使用说明/zt1.png)

**Step 2** 等待任务训练完成

![zt2](/images/图像分类使用说明/zt2.png)





## 模型导出

### 生成推理模型

---

- 任务训练完成后，点击新建任务右侧对应的【导出推理模型】按钮

![sc1](/images/图像分类使用说明/sc1.png)

![sc2](/images/图像分类使用说明/sc2.png)



### 下载推理模型

---

**step 1** 点击切换到【模型】页面

![xztl1](/images/图像分类使用说明/xztl1.png)

**step 2** 点击刚刚导出的模型右侧对应的【下载】按钮

![xztl2](/images/图像分类使用说明/xztl2.png)

![xztl3](/images/图像分类使用说明/xztl3.png)





## 模型测试

### 生成模型评估报告

---

● 任务训练完成后，点击新建任务右侧对应的【评估】按钮

![pg1](/images/图像分类使用说明/pg1.png)

![pg2](/images/图像分类使用说明/pg2.png)



### 下载模型评估报告

---

● 点击新建任务右侧的【下载评估报告】按钮

![pg3](/images/图像分类使用说明/pg3.png)

![pg4](/images/图像分类使用说明/pg4.png)



### 模型单图测试

---

**图片要求：**

导入的测试图片格式仅支持bmp/jpg/png/jpeg/tif，其他图片格式不支持。

**单图测试步骤：**

**Step 1** 点击刚刚导出的模型右侧对应的【单图测试】按钮

![cs1](/images/图像分类使用说明/cs1.png)

![cs2](/images/图像分类使用说明/cs2.png)

**Step 2** 点击【upload】按钮，上传所需预测的图片（注：图片格式为bmp/jpg/png/jpeg/tif，若多次上传，则仅保留最后一次上传的图片）

![cs3](/images/图像分类使用说明/cs3.png)

**Step 3** 点击上传后的图片，可放大显示

![cs4](/images/图像分类使用说明/cs4.png)

**Step 4** 点击【预测】按钮，显示正在预测中

![cs5](/images/图像分类使用说明/cs5.png)

**Step 5** 等待预测完成

![cs6](/images/图像分类使用说明/cs6.png)

**Step 6** 点击图片，可放大查看预测结果图片

![cs7](/images/图像分类使用说明/cs7.png)

**Step 7** 点击【下载】按钮，下载预测结果图片

![cs8](/images/图像分类使用说明/cs8.png)

![cs9](/images/图像分类使用说明/cs9.png)

**Step 8** 点击【取消】按钮，关闭【单图测试】页面，返回到【模型】页面

![cs10](/images/图像分类使用说明/cs10.png)



### 模型批量测试

---

**数据要求：**

1、导入的测试图片格式仅支持bmp/jpg/png/jpeg/tif，其他图片格式不支持

2、导入的数据压缩包size的最大值为900M

3、导入的数据压缩包命名仅支持英文、数字、下划线

4、导入数据的时间最多不能超过18分钟，否则数据会上传失败

1、导入的测试图片格式仅支持bmp/jpg/png/jpeg/tif，其他图片格式不支持

2、导入的数据压缩包size的最大值为900M

3、导入的数据压缩包命名仅支持英文、数字、下划线

4、导入数据的时间最多不能超过18分钟，否则数据会上传失败

**批量测试步骤：**

**Step 1** 点击刚刚导出的模型右侧对应的【批量测试】按钮

![cs11](/images/图像分类使用说明/cs11.png)

![cs12](/images/图像分类使用说明/cs12.png)

**Step 2** 点击【upload】按钮上传需要测试的zip文件（注：若多次上传，则仅保留最后一次上传的文件）

![cs13](/images/图像分类使用说明/cs13.png)

**Step 3** 等待上传结束

![cs14](/images/图像分类使用说明/cs14.png)

**Step 4** 点击【批量图预测】按钮

![cs15](/images/图像分类使用说明/cs15.png)

![cs16](/images/图像分类使用说明/cs16.png)

**Step 5** 点击【下载】按钮，等待一会

![cs17](/images/图像分类使用说明/cs17.png)

![cs18](/images/图像分类使用说明/cs18.png)

**Step 6** 点击【取消】按钮，关闭【批量测试】页面，返回到【模型】页面

![cs19](/images/图像分类使用说明/cs19.png)